---
import { SHOW_BUY_BUTTON } from "astro:env/server";
import AmazonLogo from "../components/AmazonLogo.astro";
const SPAIN = 'ES';

const contry = Astro.request.headers.get('X-Vercel-IP-Country') ?? SPAIN;

const storeCuntry = contry === SPAIN ? 'spain' : 'usa';
const countryName = contry === SPAIN ? 'Espa√±a' : 'Estados Unidos';
const { buy } = Astro.props;
---

{ SHOW_BUY_BUTTON &&
    <a
        href={buy[storeCuntry]}
        title="Buy on Amazon"
        target="_blank"
        rel="noopener noreferrer"
        class="text-balance inline-flex gap-2 items-center bg-yellow-400 hover:bg-yellow-500 active:bg-yellow-600 text-black font-bold py-2 px-4 rounded-lg border border-yellow-500 transition duration-200 ease-in-out hover:scale-105 justify-center text-center"
    >
        Buy on Amazon {countryName}
        <AmazonLogo />
    </a>
}